
@{
    ViewBag.Title = "Trang chủ East";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
    @*<link href="~/Content/assets/styles/fontawesome-free-6.4.2-web/css/all.min.css" rel="stylesheet" />*@

@section naviheader{
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href="/admin/home" class="nav-link">Trang chủ</a>
        </li>
     
        
    </ul>
}
<!-- Content Header (Page header) -->
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-12">
                <h1 style="text-align:center"><b>Chào mừng bạn đến với trang quản lý của</b><b style="color:red"> GEARVN</b></h1>
                @*<div id="refreshContent">

                    </div>*@
            </div>
        </div>
    </div><!-- /.container-fluid -->
    <script>
     @*$(document).ready(function () {
        $.ajax({
            url: '@Url.Action("Refresh", "Home", new { area = "" })',
            type: 'GET',
            success: function (data) {
                // Thay đổi nội dung của #refreshContent bằng nội dung của PartialView
                $('#refreshContent').html(data);
            },
            error: function () {
                console.error('Failed to load content.');
            }
        });
    });*@
    </script>
</section>
<!-- Main content -->
<section class="content">
    @*@Html.ActionLink("Refresh", "Refresh", "Home", new { area = "" }, new { @class = "form-control" })*@
    <!-- Default box -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Tổng quan</h3>

            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                    <i class="fas fa-minus"></i>
                </button>
                <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 col-sm-6 col-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-info"><i class="fa-solid fa-laptop"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">Mặt hàng</span>
                            @if (ViewBag.ProductCount != null)
                            {
                                <span class="info-box-number">@ViewBag.ProductCount</span>
                            }
                            else
                            {
                                <span class="info-box-number">N/A</span>
                            }
                        </div>
                        <!-- /.info-box-content -->
                        <br />
                        <strong><a href="/admin/products">View</a></strong>
                    </div>
                    <!-- /.info-box -->
                </div>
                <!-- /.col -->
                <div class="col-md-3 col-sm-6 col-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-success"><i class="fa-solid fa-user-plus"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Khách hàng </span>
                            <span class="info-box-number">@ViewBag.CustomerCount </span>
                        </div>
                        <!-- /.info-box-content -->
                        <br />
                        <strong><a href="/admin/customer">View</a></strong>
                    </div>
                    <!-- /.info-box -->
                </div>
                <!-- /.col -->
                <div class="col-md-3 col-sm-6 col-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-warning"><i class="fa-solid fa-file-invoice"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Đơn hàng </span>
                            <span class="info-box-number">@ViewBag.OrderCount</span>
                        </div>
                        <!-- /.info-box-content -->
                        <br />
                        <strong><a href="/admin/order">View</a></strong>
                    </div>
                    <!-- /.info-box -->
                </div>
                <!-- /.col -->
                <div class="col-md-3 col-sm-6 col-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-danger"><i class="fa-regular fa-address-book"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">ĐV cung cấp</span>
                            <span class="info-box-number">@ViewBag.ProviderCount</span>
                        </div>
                        <!-- /.info-box-content -->
                        <br />
                        <strong><a href="/admin/provider">View</a></strong>
                    </div>
                    <!-- /.info-box -->
                </div>
                <!-- /.col -->
            </div>
            @* ----------------------- *@
            <div class="card">
                <div class="card-header border-transparent">
                    <h3 class="card-title">Đơn hàng gần đây</h3>

                    <div class="card-tools">
                        <button type="button" class="btn btn-tool" data-card-widget="collapse">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-tool" data-card-widget="remove">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0" style="display: block;">
                    <div class="table-responsive">
                        <table class="table m-0">
                            <thead>
                                <tr>
                                    <th style="text-align:center; width:150px">Mã đơn hàng</th>
                                    <th style="text-align:center">Mã khách hàng</th>
                                    <th style="text-align:center">Trạng thái</th>
                                    <th style="text-align:center">Thời gian đặt</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var order in ViewBag.RecentOrders)
                                {
                                    <tr>
                                        <td style="text-align:center">#<a href="@Url.Action("View", "Order", new { id = order.OrderID })">@order.OrderID</a></td>
                                        <td style="text-align:center">@order.CustomerID</td>
                                        <td style="text-align:center"><span class="badge badge-@GetBadgeColor(order.StatusPayment.ToString())">@GetPaymentStatus(order.StatusPayment.ToString())</span></td>
                                        <td style="text-align:center">
                                            <div class="sparkbar" data-color="#00a65a" data-height="20">@order.CreatedDate</div>
                                        </td>
                                    </tr>
                                }
                                @functions {
                                    string GetBadgeColor(string status)
                                    {
                                        switch (status.ToLower())
                                        {
                                            case "1":
                                                return "warning"; // màu xanh lá cây cho trạng thái "Shipped"
                                            case "2":
                                                return "success"; // màu vàng cho trạng thái "Pending"
                                            default:
                                                return "default"; // màu mặc định cho trạng thái không xác định
                                        }
                                    }
                                    string GetPaymentStatus(string statusPayment)
                                    {
                                        switch (statusPayment)
                                        {
                                            case "2":
                                                return "Đã thanh toán"; // Văn bản cho trạng thái "2" (đã thanh toán)
                                            case "1":
                                                return "Chưa thanh toán"; // Văn bản cho trạng thái "1" (chưa thanh toán)
                                            default:
                                                return "Không xác định"; // Văn bản cho trạng thái không xác định
                                        }
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.card-body -->
                <div class="card-footer clearfix" style="display: block;">
                    @*<a href="javascript:void(0)" class="btn btn-sm btn-info float-left">Place New Order</a>*@
                    <a href="/admin/order" class="btn btn-sm btn-info float-left">Xem tất cả đơn hàng</a>
                </div>
                <!-- /.card-footer -->
            </div>
        </div>
        <!-- /.card-body -->
        <div class="card-footer">

        </div>
        <!-- /.card-footer-->
    </div>
    <!-- /.card -->


</section>
<!-- /.content -->
